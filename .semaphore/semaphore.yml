version: v1.0
name: Python + ARM Binary Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Run Python + ARM Binary
    task:
      jobs:
        - name: Python + bgmi ARM Job
          commands:
            - checkout
            - sem-version python 3.10
            - pip install --upgrade pip
            - pip install -r requirements.txt
            - sudo apt-get update
            - sudo apt-get install -y qemu-user
            - chmod +x ./bgmi
            - ls -l ./bgmi
            - qemu-arm ./bgmi || echo "bgmi failed to run via QEMU"
            - python3 main.py
